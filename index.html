<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ride Scheduler</title>
  <style>
    .row { margin-bottom: 10px; }
    input { margin: 5px; }
    button { margin: 10px 0; }
  </style>
</head>
<body>
  <h2>Ride Booking Form</h2>
  <form id="rideForm">
    <div id="formRows">
      <div class="row">
        <input type="text" name="passenger" placeholder="Passenger" required>
        <input type="date" name="date" required>
        <input type="time" name="time" required>
        <input type="text" name="pickup" placeholder="Pick Up" required>
        <input type="text" name="dropoff" placeholder="Drop Off" required>
      </div>
    </div>
    <button type="button" onclick="addRow()">+ Add Row</button><br>
    <button type="submit">Submit</button>
  </form>

  <script>
    const scriptURL = 'YOUR_WEB_APP_URL_HERE'; // Replace with your Apps Script Web App URL

    function addRow() {
      const container = document.getElementById("formRows");
      const newRow = document.createElement("div");
      newRow.className = "row";
      newRow.innerHTML = `
        <input type="text" name="passenger" placeholder="Passenger" required>
        <input type="date" name="date" required>
        <input type="time" name="time" required>
        <input type="text" name="pickup" placeholder="Pick Up" required>
        <input type="text" name="dropoff" placeholder="Drop Off" required>
      `;
      container.appendChild(newRow);
    }

    document.getElementById("rideForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const rows = document.querySelectorAll(".row");
      const data = Array.from(rows).map(row => {
        const inputs = row.querySelectorAll("input");
        return {
          passenger: inputs[0].value,
          date: inputs[1].value,
          time: inputs[2].value,
          pickup: inputs[3].value,
          dropoff: inputs[4].value
        };
      });

      fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(data),
        headers: { "Content-Type": "application/json" }
      })
      .then(response => response.text())
      .then(result => {
        alert("Rides created successfully!");
        document.getElementById("rideForm").reset();
        document.getElementById("formRows").innerHTML = `
          <div class="row">
            <input type="text" name="passenger" placeholder="Passenger" required>
            <input type="date" name="date" required>
            <input type="time" name="time" required>
            <input type="text" name="pickup" placeholder="Pick Up" required>
            <input type="text" name="dropoff" placeholder="Drop Off" required>
          </div>
        `;
      })
      .catch(error => {
        alert("Error: " + error);
        console.error(error);
      });
    });
  </script>
</body>
</html>
